{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: 'http://127.0.0.1:8000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nconst setAuthToken = token => {\n  api.defaults.headers.common['Authorization'] = token ? `Bearer ${token}` : null;\n};\nconst handleLogin = async (username, password) => {\n  try {\n    const response = await api.post('/token/', {\n      username,\n      password\n    });\n    const {\n      access,\n      refresh\n    } = response.data;\n    localStorage.setItem('access_token', access);\n    localStorage.setItem('refresh_token', refresh);\n    setAuthToken(access);\n  } catch (error) {\n    console.error('Error logging in:', error);\n    throw error;\n  }\n};\nconst handleLogout = () => {\n  localStorage.removeItem('access_token');\n  localStorage.removeItem('refresh_token');\n  setAuthToken(null);\n};\nconst handleRefreshToken = async () => {\n  const refreshToken = localStorage.getItem('refresh_token');\n  if (refreshToken) {\n    try {\n      const response = await api.post('/token/refresh/', {\n        refresh: refreshToken\n      });\n      const {\n        access\n      } = response.data;\n      localStorage.setItem('access_token', access);\n      setAuthToken(access);\n    } catch (error) {\n      console.error('Error refreshing token:', error);\n      handleLogout();\n    }\n  } else {\n    handleLogout();\n  }\n};\nexport { api, handleLogin, handleLogout, handleRefreshToken };","map":{"version":3,"names":["axios","api","create","baseURL","headers","setAuthToken","token","defaults","common","handleLogin","username","password","response","post","access","refresh","data","localStorage","setItem","error","console","handleLogout","removeItem","handleRefreshToken","refreshToken","getItem"],"sources":["/home/barrack/Job-project/job_scrapper_frontend/src/service/auth.tsx"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: 'http://127.0.0.1:8000/api',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nconst setAuthToken = (token: string) => {\n  api.defaults.headers.common['Authorization'] = token ? `Bearer ${token}` : null;\n};\n\nconst handleLogin = async (username: any, password: any) => {\n  try {\n    const response = await api.post('/token/', { username, password });\n    const { access, refresh } = response.data;\n    localStorage.setItem('access_token', access);\n    localStorage.setItem('refresh_token', refresh);\n    setAuthToken(access);\n  } catch (error) {\n    console.error('Error logging in:', error);\n    throw error;\n  }\n};\n\nconst handleLogout = () => {\n  localStorage.removeItem('access_token');\n  localStorage.removeItem('refresh_token');\n  setAuthToken(null);\n};\n\nconst handleRefreshToken = async () => {\n  const refreshToken = localStorage.getItem('refresh_token');\n  if (refreshToken) {\n    try {\n      const response = await api.post('/token/refresh/', { refresh: refreshToken });\n      const { access } = response.data;\n      localStorage.setItem('access_token', access);\n      setAuthToken(access);\n    } catch (error) {\n      console.error('Error refreshing token:', error);\n      handleLogout();\n    }\n  } else {\n    handleLogout();\n  }\n};\n\nexport { api, handleLogin, handleLogout, handleRefreshToken };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EACvBC,OAAO,EAAE,2BAA2B;EACpCC,OAAO,EAAE;IACP,cAAc,EAAE;EAClB;AACF,CAAC,CAAC;AAEF,MAAMC,YAAY,GAAIC,KAAa,IAAK;EACtCL,GAAG,CAACM,QAAQ,CAACH,OAAO,CAACI,MAAM,CAAC,eAAe,CAAC,GAAGF,KAAK,GAAI,UAASA,KAAM,EAAC,GAAG,IAAI;AACjF,CAAC;AAED,MAAMG,WAAW,GAAG,MAAAA,CAAOC,QAAa,EAAEC,QAAa,KAAK;EAC1D,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMX,GAAG,CAACY,IAAI,CAAC,SAAS,EAAE;MAAEH,QAAQ;MAAEC;IAAS,CAAC,CAAC;IAClE,MAAM;MAAEG,MAAM;MAAEC;IAAQ,CAAC,GAAGH,QAAQ,CAACI,IAAI;IACzCC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEJ,MAAM,CAAC;IAC5CG,YAAY,CAACC,OAAO,CAAC,eAAe,EAAEH,OAAO,CAAC;IAC9CV,YAAY,CAACS,MAAM,CAAC;EACtB,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;IACzC,MAAMA,KAAK;EACb;AACF,CAAC;AAED,MAAME,YAAY,GAAGA,CAAA,KAAM;EACzBJ,YAAY,CAACK,UAAU,CAAC,cAAc,CAAC;EACvCL,YAAY,CAACK,UAAU,CAAC,eAAe,CAAC;EACxCjB,YAAY,CAAC,IAAI,CAAC;AACpB,CAAC;AAED,MAAMkB,kBAAkB,GAAG,MAAAA,CAAA,KAAY;EACrC,MAAMC,YAAY,GAAGP,YAAY,CAACQ,OAAO,CAAC,eAAe,CAAC;EAC1D,IAAID,YAAY,EAAE;IAChB,IAAI;MACF,MAAMZ,QAAQ,GAAG,MAAMX,GAAG,CAACY,IAAI,CAAC,iBAAiB,EAAE;QAAEE,OAAO,EAAES;MAAa,CAAC,CAAC;MAC7E,MAAM;QAAEV;MAAO,CAAC,GAAGF,QAAQ,CAACI,IAAI;MAChCC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEJ,MAAM,CAAC;MAC5CT,YAAY,CAACS,MAAM,CAAC;IACtB,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CE,YAAY,CAAC,CAAC;IAChB;EACF,CAAC,MAAM;IACLA,YAAY,CAAC,CAAC;EAChB;AACF,CAAC;AAED,SAASpB,GAAG,EAAEQ,WAAW,EAAEY,YAAY,EAAEE,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}